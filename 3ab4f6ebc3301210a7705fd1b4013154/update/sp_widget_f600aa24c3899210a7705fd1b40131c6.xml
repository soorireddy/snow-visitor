<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function() {
	var c = this;
  c.suggestions = [];
  c.getAutocompleteResults = function(query) {
		console.log("query ==>"+ query);
		c.server.get({
			action: 'getLocations',
			searchTerm: query
		}).then(function(response) {
			c.suggestions = response.data.results; 
		});
	};
};]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>visitor_location_search</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>Visitor Location Search</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
	if (input && input.searchTerm) {
		var gr = new GlideRecord('sys_user'); 
		gr.addQuery('first_name', 'STARTSWITH', input.searchTerm);
		gr.setLimit(5);
		gr.query();
		var results = [];
		if (input.action == 'getLocations') {
			while (gr.next()) {
				results.push({
					sys_id: gr.sys_id.toString(), // Send the sys_id if needed for links or further processing
					name: gr.first_name.toString() + ' '+ gr.last_name.toString()    // Replace 'name' with the actual field you're searching on
				});
			}
			data.results = results;
		}
		data.results = results;
	}
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-10-01 18:37:50</sys_created_on>
        <sys_id>f600aa24c3899210a7705fd1b40131c6</sys_id>
        <sys_mod_count>9</sys_mod_count>
        <sys_name>Visitor Location Search</sys_name>
        <sys_package display_value="Visitor Management" source="x_845458_visitorsa">3ab4f6ebc3301210a7705fd1b4013154</sys_package>
        <sys_policy/>
        <sys_scope display_value="Visitor Management">3ab4f6ebc3301210a7705fd1b4013154</sys_scope>
        <sys_update_name>sp_widget_f600aa24c3899210a7705fd1b40131c6</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-10-01 19:04:02</sys_updated_on>
        <template><![CDATA[<div class="form-group">
  <label for="search-input">Search:</label>
  <input type="text" 
         id="search-input" 
         class="form-control" 
         ng-model="c.query" 
         ng-change="c.getAutocompleteResults(c.query)" 
         placeholder="Type to search...">

  <!-- Autocomplete Results -->
  <ul class="list-group" ng-if="c.suggestions.length > 0">
    <li class="list-group-item" ng-repeat="item in c.suggestions">
      {{ item.name }} <!-- Customize based on the table fields -->
    </li>
  </ul>
</div>
]]></template>
    </sp_widget>
</record_update>
